import { default  as Schema } from '@sprucelabs/schema'
import * as SpruceSchema from '@sprucelabs/schema'


// Schemas by namespace
{{! the definition partial, pass a schema and get back object that is the values and types }}
{{#* inline "schemaValues"}}
	{{#if dynamicKeySignature }}
    	/* {{dynamicKeySignature.label}}.{{#if dynamicKeySignature.hint}} {{dynamicKeySignature.hint}}{{/if}} */
    	[{{dynamicKeySignature.key}}:string]: string{{/if}}{{#if dynamicKeySignature.isArray}}[]{{/if}}
	{{#each fields}}
    	/* {{{label}}}.{{#if hint}} {{{hint}}}{{/if}} */
		'{{@key}}'{{#unless isRequired}}?{{/unless}}: {{fieldDefinitionValueType this }}
	{{/each}}
{{/inline}}


{{#each schemaTemplateItems}}

	export namespace SpruceSchemas.{{namespace}}.{{typeName}} {
		export const id = '{{{escape id}}}'

		/* {{definition.description}} */
		export interface {{interfaceName}} {
			{{> schemaValues definition }}
		}

		/* the interface for the schema definition for a {{typeName}} */
		export interface IDefinition extends SpruceSchema.ISchemaDefinition {
			{{> schemaDefinition schema=definition renderAs="type" }}
		}

		/* the schema definition for a {{typeName}} */
		export const definition: SpruceSchemas.{{namespace}}.{{typeName}}.IDefinition = {
			{{> schemaDefinition schema=definition renderAs="value" }}
		}

		export type Instance = Schema<SpruceSchemas.{{namespace}}.{{typeName}}.IDefinition>
	}
	
{{/each}}



