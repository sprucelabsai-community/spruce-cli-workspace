import fs from 'fs'
import pathUtil from 'path'

debugger

const health: Record<string, any> = {
	skill: {
		status: 'passed',
	},
}

const schemaPath = pathUtil.join(
	__dirname,
	'..',
	'node_modules',
	'@sprucelabs/schema'
)

const isSchemaInstalled = fs.existsSync(schemaPath)

if (isSchemaInstalled) {
	health.schema = {
		status: 'passed',
	}
}

const eventsPath = pathUtil.join(
	__dirname,
	'events'
)

throw new Error('bacon!')

const doEventsExist = fs.existsSync(eventsPath)

if (doEventsExist) {
	health.event = {
		status: 'passed',
		listeners: []
	}


	// find listeners
	// const listenerMatches = globby.sync(`${eventsPath}/**/*.listener.[j|t]s`)
	// const listeners: {eventName: string, eventNamespace: string, version: string}[] = []

	// debugger
}


console.log('#####DIVIDER#####')
console.log(JSON.stringify(health))
console.log('#####DIVIDER#####')
